<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-ux-AccordionListItem'>/**
</span> * A AccordionListItem is a container for Ext.ux.AccordionList with
 * useComponent: true.
 *
 * The following example shows how to configure and update sub-component items
 * in a list:
 *
 *  Ext.define(&#39;AccordionListExample.view.ListItem&#39;, {
 *      extend: &#39;Ext.ux.AccordionListItem&#39;,
 *      xtype : &#39;examplelistitem&#39;,
 *
 *      config: {
 *          layout: {
 *              type: &#39;vbox&#39;
 *          },
 *
 *          text: {
 *          },
 *          button: {
 *              iconMask: true,
 *              docked: &#39;right&#39;,
 *          },
 *          message: {
 *              docked: &#39;bottom&#39;,
 *              label: &#39;message&#39;
 *          },
 *          limit: {
 *              docked: &#39;top&#39;,
 *              label: &#39;limit&#39;
 *          },
 *
 *          headerDataMap: {
 *              getText: {
 *                  setHtml: &#39;text&#39;
 *              },
 *              getButton: {
 *                  setIconCls: &#39;icon&#39;
 *              }
 *          },
 *
 *          contentDataMap: {
 *              getLimit: {
 *                  setValue: &#39;limit&#39;
 *              },
 *              getMessage: {
 *                  setValue: &#39;message&#39;
 *              }
 *          }
 *      },
 *
 *      applyText: function(config) {
 *          return Ext.factory(config, Ext.Component);
 *      },
 *
 *      updateText: function(newText) {
 *          if (newText) {
 *              this.add(newText);
 *          }
 *      },
 *
 *      applyButton: function(config) {
 *          return Ext.factory(config, Ext.Button);
 *      },
 *
 *      updateButton: function(newButton) {
 *          if (newButton) {
 *              this.add(newButton);
 *          }
 *      },
 *
 *      applyLimit: function(config) {
 *          return Ext.factory(config, Ext.field.DatePicker);
 *      },
 *
 *      updateLimit: function(newDay) {
 *          if (newDay) {
 *              this.add(newDay);
 *          }
 *      },
 *
 *      applyMessage: function(config) {
 *          return Ext.factory(config, Ext.field.TextArea);
 *      },
 *
 *      updateMessage: function(newMessage) {
 *          if (newMessage) {
 *              this.add(newMessage);
 *          }
 *      }
 *  });
 *
 */
Ext.define(&#39;Ext.ux.AccordionListItem&#39;, {
    extend: &#39;Ext.dataview.component.ListItem&#39;,
    xtype : &#39;accordionlistitem&#39;,

    config: {
<span id='Ext-ux-AccordionListItem-cfg-baseCls'>        baseCls: &#39;accordion-list-item&#39;,  // Do not override this property!
</span>
<span id='Ext-ux-AccordionListItem-cfg-layout'>        /**
</span>         * @cfg {String/Object} layout
         * Default layout config.
         */
        layout: {
            type: &#39;hbox&#39;
        },

<span id='Ext-ux-AccordionListItem-cfg-indent'>        /**
</span>         * @cfg {Boolean} indent
         * Whether to indent child items.
         */
        indent: false,

<span id='Ext-ux-AccordionListItem-cfg-headerDataMap'>        /**
</span>         * @cfg {Object} headerDataMap
         * Defines header item&#39;s dataMap
         */
        headerDataMap: {},

<span id='Ext-ux-AccordionListItem-cfg-layout'>        /**
</span>         * @cfg {String/Object} layout
         * Defines content item&#39;s dataMap
         */
        contentDataMap: {},

<span id='Ext-ux-AccordionListItem-cfg-itemMark'>        // @private
</span>        itemMark: {
            docked: &#39;left&#39;
        }
    },

<span id='Ext-ux-AccordionListItem-method-applyItemMark'>    /**
</span>     * @param  {Object} config
     */
    applyItemMark: function(config) {
        return Ext.factory(config, Ext.Component);
    },

<span id='Ext-ux-AccordionListItem-method-updateItemMark'>    /**
</span>     * @param  {Ext.Component} newItemMark
     */
    updateItemMark: function(newItemMark) {
        if (newItemMark) {
            this.add(newItemMark);
        }
    },

<span id='Ext-ux-AccordionListItem-method-updateRecord'>    /**
</span>     * @override
     * @param newRecord
     */
    updateRecord: function(record) {
        var me = this,
            dataview = me.dataview || this.getDataview(),
            data = record &amp;&amp; dataview.prepareData(record.getData(true), dataview.getStore().indexOf(record), record),
            body = this.getBody(),
            dataMap;

        me._record = record;

        var leaf = record &amp;&amp; record.isLeaf(),
            expanded = record &amp;&amp; record.isExpanded(),
            depth = record ? record.getDepth() : 0;

        if (leaf) {
            dataMap = me.getContentDataMap();
        }
        else {
            dataMap = me.getHeaderDataMap();
        }

        me.doMapData(dataMap, data, body);
        me.doUpdateItemMark(expanded, leaf, depth);
        me.toggle(leaf);

<span id='Ext-ux-AccordionListItem-event-updatedata'>        /**
</span>         * @event updatedata
         * Fires whenever the data of the DataItem is updated.
         * @param {Ext.dataview.component.DataItem} this The DataItem instance.
         * @param {Object} newData The new data.
         */
        me.fireEvent(&#39;updatedata&#39;, me, data);
    },

<span id='Ext-ux-AccordionListItem-method-doUpdateItemMark'>    /**
</span>     * @private
     * @param  {Boolean} expanded
     * @param  {Boolean} leaf
     * @param  {Number} depth
     */
    doUpdateItemMark: function (expanded, leaf, depth) {
        var me = this,
            itemMark = me.getItemMark();

        if (Ext.isEmpty(expanded)) {
            return;
        }

        var downMark = &#39;&lt;div class=&quot;down&quot;&gt;&lt;/down&gt;&#39;,
            rightMark = &#39;&lt;div class=&quot;right&quot;&gt;&lt;/div&gt;&#39;;

        itemMark.setHtml(leaf ? &#39;&#39; : expanded ? downMark : rightMark);

        if (me.getIndent()) {
            itemMark.setStyle(&#39;padding-left:&#39; + depth + &#39;em;&#39;);
        }
    },

<span id='Ext-ux-AccordionListItem-method-toggle'>    /**
</span>     * @private
     * @param  {Boolean} leaf
     */
    toggle: function (leaf) {
        var me = this;
        me.doHiddenComponents(me.getHeaderDataMap(), leaf);
        me.doHiddenComponents(me.getContentDataMap(), !leaf);
    },

<span id='Ext-ux-AccordionListItem-method-doHiddenComponents'>    /**
</span>     * @private
     * @param  {Object} map
     * @param  {Boolean} hidden
     */
    doHiddenComponents: function (map, hidden) {
        var me = this;
        Ext.Object.each(map, function (key, value) {
            var component = me[key]();
            if (component) {
                component.setHidden(hidden);
            }
        });
    }

});</pre>
</body>
</html>
